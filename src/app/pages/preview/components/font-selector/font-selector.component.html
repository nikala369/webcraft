<div class="font-picker">
  <div class="custom-dropdown" [class.active]="dropdownOpen()">
    <button class="selected-option" (click)="toggleDropdown()">
      <span [style.fontFamily]="getFontFamily(selectedFont())">
        <span class="font-name">{{ selectedFont().name }}</span>
        <span class="font-category">{{ selectedFont().category }}</span>
      </span>
      <svg
        class="arrow"
        [class.active]="dropdownOpen()"
        width="12"
        height="8"
        viewBox="0 0 12 8"
      >
        <path fill="currentColor" d="M6 7.4L0.6 2 2 0.6l4 4 4-4 1.4 1.4z" />
      </svg>
    </button>

    <div
      class="dropdown-options"
      *ngIf="dropdownOpen() && fonts()"
      (click)="$event.stopPropagation()"
    >
      <div
        *ngFor="let font of fonts()"
        class="custom-option"
        [class.active]="font.id === selectedFont().id"
        (click)="selectFont(font)"
        [style.fontFamily]="getFontFamily(font)"
      >
        <div class="font-option-content">
          <span class="font-name">{{ font.name }}</span>
          <span class="font-category">{{ font?.category }}</span>
        </div>
        <div class="font-preview" [style.fontFamily]="getFontFamily(font)">
          <span
            class="preview-light"
            [style.fontWeight]="
              font.weights && font.weights.length ? font.weights[0] : 300
            "
            >Aa
          </span>
          <span class="preview-regular" [style.fontWeight]="400">Aa</span>
          <span class="preview-bold" [style.fontWeight]="700">Aa</span>
        </div>
      </div>
    </div>
  </div>
</div>
